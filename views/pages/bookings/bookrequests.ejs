<!-- views/index.ejs -->
<!DOCTYPE html>
<html>
    <head>
        <%- include ("../../partials/head") %>
        <link
            type="text/css"
            rel="stylesheet"
            href="../../public/css/submit.css"
        />
        <script src="/public/js/bookingrequests.js"></script>
    </head>

    <body>
        <%- include ("../../partials/header") %>

        <div class="container mt-5" style="margin-bottom: 100px;">
            <div class="shadow card">
                <div class="card-header">
                    <%- include ("../../partials/cameras/cameraNav") %>
                </div>
                <ol class="list-group list-group-flush">
                    <li class="list-group-item rounded-0 border-top-0">
                        <div class="row">
                            <div class="col"><strong>Patron</strong></div>
                            <div class="col-1">
                                <strong>Date</strong>
                            </div>
                            <div class="col-2">
                                <strong>Booking</strong>
                            </div>
                            <div class="col"><strong>Camera</strong></div>
                            <div class="col"><strong>Lens 1</strong></div>
                            <div class="col"><strong>Lens 2</strong></div>
                            <div class="col-1"></div>
                        </div>
                    </li>
                    <%bookings.forEach(function (booking) {%>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col">
                                <%=booking.patron.fname%>
                                <%=booking.patron.lname%>
                            </div>
                            <div class="col-1">
                                <%=booking.dateSubmitted%>
                            </div>
                            <div class="col-2">
                                <%if(booking.calendarEvent.start.substring(5,6)
                                == "0")
                                {%><%=booking.calendarEvent.start.substring(6,7)%><%}
                                else
                                {%><%=booking.calendarEvent.start.substring(5,7)%><%}%>/<%=booking.calendarEvent.start.substring(8,10)%>
                                - <%if(booking.calendarEvent.end.substring(5,6)
                                == "0")
                                {%><%=booking.calendarEvent.end.substring(6,7)%><%}
                                else
                                {%><%=booking.calendarEvent.end.substring(5,7)%><%}%>/<%=booking.calendarEvent.end.substring(8,10)%>
                            </div>
                            <div class="col">
                                <%=booking.camera%>
                            </div>
                            <div class="col">
                                <%=booking.lens1%>
                            </div>
                            <div class="col">
                                <%=booking.lens2%>
                            </div>
                            <div class="col-1 text-right">
                                <%if (camPage == "newSub") {%>
                                <button
                                    class="btn btn-success btn-accept"
                                    submissionID="<%=booking._id%>"
                                    data-toggle="modal"
                                    data-target=".modal"
                                >
                                    View
                                </button>
                                <%} else {%>
                                <button
                                    class="btn btn-danger btn-delete"
                                    submissionID="<%=booking._id%>"
                                >
                                    Delete
                                </button>
                                <%}%>
                            </div>
                        </div>
                    </li>
                    <%})%>
                </ol>
            </div>
        </div>

        <div class="modal fade" tabindex="-1" role="dialog">
            <div
                class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg"
            >
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Booking Request Confirm</h5>
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body"></div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-success booking-confirm"
                        >
                            Confirm
                        </button>

                        <button
                            type="button"
                            class="btn btn-danger booking-reject"
                        >
                            Reject
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <%- include ("../../partials/footer") %>
    </body>
</html>
