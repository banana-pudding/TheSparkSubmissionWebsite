<!DOCTYPE html>
<html>
    <head>
        <%- include ("../partials/head") %>
        <style>
            .form-control {
                background-color: transparent !important;
                border: none !important;
                margin-left: -12px !important;
                margin-right: -12px !important;
            }

            .ico-btn svg {
                width: 1.4em;
                height: 1.4em;
            }
        </style>
    </head>
    <body>
        <%- include ("../partials/header") %>
        <div class="container-flush mx-5 mt-4" style="margin-bottom: 100px">
            <div class="row">
                <div class="col-7">
                    <div class="card shadow">
                        <div class="card-header border-bottom-0">
                            <h4 class="mb-0">Full Service Printers</h4>
                        </div>
                        <table class="table table-striped mb-0">
                            <thead>
                                <tr>
                                    <th scope="col">Printer Name</th>
                                    <th scope="col">Printer Type</th>
                                    <th scope="col">Help Text</th>
                                    <th scope="col">Printer Location</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <form
                                        class="row"
                                        action="/newfullservice"
                                        method="POST"
                                    >
                                    <td>
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="printerName"
                                                placeholder="New Printer Name"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                class="form-control"
                                                name="printerType"
                                                placeholder="New Printer Type"
                                                required
                                            />
                                        </td>
                                        
                                        <td>
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="printerHelpText"
                                                placeholder="Help Text"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <select
                                                class="form-control"
                                                name="printerLocation"
                                                required
                                            >
                                                <option value="Willis Library">
                                                    Willis Library
                                                </option>
                                                <option value="Discovery Park">
                                                    Discovery Park
                                                </option>
                                            </select>
                                        </td>
                                        <td>
                                            <button class="btn ico-btn text-success">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
                                                </svg>
                                            </button>
                                        </td>
                                    </form>
                                </tr>
                                <% for (var thisPrinter of fullService) {%>
                                <tr>
                                    <form
                                        action="/editfullservice"
                                        method="POST"
                                    >
                                        <input
                                            type="hidden"
                                            name="printerID"
                                            value="<%= thisPrinter._id%>"
                                        />
                                        <td>
                                            <input
                                                class="form-control font-weight-bold"
                                                type="text"
                                                name="printerName"
                                                value="<%=thisPrinter.printerName%>"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                class="form-control"
                                                name="printerType"
                                                value='<%=thisPrinter.printerType%>'
                                                required
                                            />
                                        </td>
                                        
                                        <td>
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="printerHelpText"
                                                value="<%=thisPrinter.printerHelpText%>"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <!-- prettier-ignore -->
                                            <select
                                                class="form-control"
                                                name="printerLocation"
                                                required
                                            >
                                                <!-- prettier-ignore -->
                                                <option value="Willis Library" <%if (thisPrinter.printerLocation == 'Willis Library'){%>selected<%}%>>Willis Library</option>
                                                <!-- prettier-ignore -->
                                                <option value="Discovery Park" <%if (thisPrinter.printerLocation == 'Discovery Park'){%>selected<%}%>>Discovery Park</option>
                                            </select>
                                        </td>
                                        <td>
                                            <button class="btn ico-btn text-primary">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save-fill" viewBox="0 0 16 16">
                                                  <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293V1.5z"/>
                                                </svg>
                                            </button>
                                            <span class="btn ico-btn text-danger" id="deleteFullService" printerID='<%=thisPrinter._id%>'>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                                                    <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
                                                </svg>
                                            </span>
                                        </td>
                                    </form>
                                </tr>
                                <%}%>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col">
                    <div class="card shadow">
                        <div class="card-header border-bottom-0">
                            <h4 class="mb-0">Self Service Printers</h4>
                        </div>
                        <table class="table table-striped mb-0">
                            <thead>
                                <tr>
                                    <th scope="col">Printer Name</th>
                                    <th scope="col">Printer Barcode</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <form
                                        class="row"
                                        action="/newselfservice"
                                        method="POST"
                                    >
                                        <td>
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="printerName"
                                                placeholder="New Printer Name"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <input
                                                class="form-control"
                                                type="number"
                                                name="printerBarcode"
                                                placeholder="New Printer Barcode"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <button class="btn ico-btn text-success">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
                                                </svg>
                                            </button>
                                        </td>
                                    </form>
                                </tr>
                                <% for (var thisPrinter of selfService) {%>
                                <tr>
                                    <form
                                        action="/editselfservice"
                                        method="POST"
                                    >
                                        <input
                                            type="hidden"
                                            name="printerID"
                                            value="<%= thisPrinter._id%>"
                                        />
                                        <td>
                                            <input
                                                class="form-control font-weight-bold"
                                                type="text"
                                                name="printerName"
                                                value="<%= thisPrinter.printerName%>"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <input
                                                class="form-control"
                                                type="number"
                                                name="printerBarcode"
                                                value="<%= thisPrinter.printerBarcode%>"
                                                required
                                            />
                                        </td>
                                        <td>
                                            <button class="btn ico-btn text-primary">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save-fill" viewBox="0 0 16 16">
                                                  <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293V1.5z"/>
                                                </svg>
                                            </button>
                                            <span  class='btn ico-btn text-danger' id="deleteSelfService" printerID='<%=thisPrinter._id%>'>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                                                    <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
                                                </svg>
                                            </span>
                                        </td>
                                    </form>
                                </tr>
                                <%}%>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <script>
            document.getElementById("deleteSelfService").onclick = function(e) {
                console.log("deleting self")
                e.preventDefault();
                $.ajax({
                    type: "POST",
                    url: "/deleteselfservice",
                    data: {
                        printerID: e.target.getAttribute("printerID"),
                    },
                }).done(function () {
                    location.reload();
                });
            }

            document.getElementById("deleteFullService").onclick = function(e) {
                console.log("deleting full")

                e.preventDefault();
                $.ajax({
                    type: "POST",
                    url: "/deletefullservice",
                    data: {
                        printerID: e.target.getAttribute("printerID"),
                    },
                }).done(function () {
                    location.reload();
                });
            }
        </script>
        <%- include ("../partials/footer") %>
    </body>
</html>
